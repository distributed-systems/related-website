# eb-resource-client

resource client for the resource service

## installation

    git clone git@github.com:joinbox/eb-resource-client

## build status

[![Build Status](https://magnum.travis-ci.com/joinbox/eb-resource-client.svg?token=FpqwU7qx4ZzksMfTnxPg&branch=master)](https://magnum.travis-ci.com/joinbox/eb-resource-client)


## usage

You have to define the namespaces you want to fetch from the resource service so it can fetch and cache them. the data is updated every minute, sou you will always have up to date locales.

You also need to listen on the «request» event, which must be redirected to the resource service.

### Constructor

    var   ResourceClient = require('eb-resource-client')
        , client;

    // don't get any locales from the service
    client = new ResourceClient();


    // get all locales where the key is starting with «eb.test.»
    client = new ResourceClient('eb.test.')


    // get multiple namespaces
    client = new ResourceClient(['eb.test.', 'eb.mail.']);


### load method

the load method load more namespaces
    
    // load locales for one namespace
    client.load('eb.test.');

    // load locales for multipl enamespaces
    client.load(['eb.test.', 'eb.mail.']);

    // wait until the locales are loaded
    client.load('eb.test', function(err){});



### get method

returns a locale or an empty string if nothing was found. this renders also variables if the locale contains the keywords for them. markdown locales will be rendered into html.
    
    // get a simple locale
    client.get('eb.test.welcome', 'en');

    // render a markdown locale
    client.get('eb.test.welcome.md', 'de');

    // insert variables into locale
    client.get('eb.test.welcome', 'it', {name: 'dylan'});

    // insert variables into a rendered mardown locale
    client.get('eb.test.welcome.md', 'fr', {name: 'dylan'});



The format which the variables should be marked inside the text is: «%key%».


### load event

the load event is fired when the client and all namespaces passed to the constructor were loaded


### request event

the client communicates via the request event with the resource service, this event must be passed to the soa.